<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechSupport Pro | Ajustes</title>
    
    <!-- Bootstrap 5 + Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 sidebar p-0">
                <div class="p-4">
                    <h4 class="text-white mb-4">
                        <i class="fas fa-tools me-2"></i>TechSupport Pro
                    </h4>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html" id="nav-dashboard">
                                <i class="fas fa-chart-line"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="soporte.html" id="nav-soporte">
                                <i class="fas fa-laptop-medical"></i> Soporte
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cotizaciones.html" id="nav-cotizaciones">
                                <i class="fas fa-file-invoice-dollar"></i> Cotizaciones
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="facturas.html" id="nav-facturas">
                                <i class="fas fa-receipt"></i> Facturas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="inventario.html" id="nav-inventario">
                                <i class="fas fa-boxes"></i> Inventario
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="directorio.html" id="nav-directorio">
                                <i class="fas fa-address-book"></i> Directorio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="ajustes.html" id="nav-ajustes">
                                <i class="fas fa-cog"></i> Ajustes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="roles.html" id="nav-roles">
                                <i class="fas fa-users-cog"></i> Roles
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-md-10 ms-auto p-4">
                <div class="row mb-4">
                    <div class="col-12">
                        <h4 class="fade-in"><i class="fas fa-cog me-2"></i>Ajustes del Sistema</h4>
                    </div>
                </div>

                <!-- Secciones de Ajustes -->
                <div class="row">
                    <!-- Tema -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-paint-brush me-2"></i>Tema</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="darkModeSwitch">
                                    <label class="form-check-label" for="darkModeSwitch">Modo Oscuro</label>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Color Principal</label>
                                    <input type="color" class="form-control form-control-color" id="primaryColor" value="#0d6efd">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Color de Acento</label>
                                    <input type="color" class="form-control form-control-color" id="accentColor" value="#198754">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Medios de Pago -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-money-bill me-2"></i>Medios de Pago</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Medios de Pago Disponibles</label>
                                    <div id="paymentMethodsList">
                                        <!-- Los métodos se cargarán dinámicamente -->
                                    </div>
                                    <button class="btn btn-primary btn-sm mt-2" onclick="addPaymentMethod()">
                                        <i class="fas fa-plus me-1"></i>Agregar Método
                                    </button>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Información Bancaria</label>
                                    <textarea class="form-control" id="bankInfo" rows="3" placeholder="Ingrese la información bancaria para transferencias"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Información de la Empresa -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-building me-2"></i>Información de la Empresa</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Nombre de la Empresa</label>
                                    <input type="text" class="form-control" id="companyName">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Logo</label>
                                    <input type="file" class="form-control" id="companyLogo" accept="image/*">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Dirección</label>
                                    <textarea class="form-control" id="companyAddress" rows="2"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Información de Contacto</label>
                                    <textarea class="form-control" id="companyContact" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Configuración de Correo -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-envelope me-2"></i>Configuración de Correo</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Correo Electrónico</label>
                                    <input type="email" class="form-control" id="emailAddress">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Servidor SMTP</label>
                                    <input type="text" class="form-control" id="smtpServer">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Puerto</label>
                                    <input type="number" class="form-control" id="smtpPort">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Contraseña</label>
                                    <input type="password" class="form-control" id="emailPassword">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Respaldos -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-database me-2"></i>Respaldos</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Respaldo Automático</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="autoBackupSwitch">
                                        <label class="form-check-label" for="autoBackupSwitch">Activar</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Frecuencia</label>
                                    <select class="form-select" id="backupFrequency">
                                        <option value="daily">Diario</option>
                                        <option value="weekly">Semanal</option>
                                        <option value="monthly">Mensual</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary" onclick="createBackup()">
                                    <i class="fas fa-download me-2"></i>Crear Respaldo Ahora
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Notificaciones -->
                    <div class="col-md-6 mb-4">
                        <div class="card card-support fade-in">
                            <div class="card-header bg-white">
                                <h5 class="mb-0"><i class="fas fa-bell me-2"></i>Notificaciones</h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="newOrderNotif">
                                    <label class="form-check-label" for="newOrderNotif">
                                        Nuevas órdenes de servicio
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="paymentNotif">
                                    <label class="form-check-label" for="paymentNotif">
                                        Pagos recibidos
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="lowStockNotif">
                                    <label class="form-check-label" for="lowStockNotif">
                                        Inventario bajo
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="quotationNotif">
                                    <label class="form-check-label" for="quotationNotif">
                                        Cotizaciones aprobadas/rechazadas
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de Acción -->
                <div class="row mt-4">
                    <div class="col-12">
                        <button class="btn btn-primary me-2" onclick="saveSettings()">
                            <i class="fas fa-save me-2"></i>Guardar Cambios
                        </button>
                        <button class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo me-2"></i>Restaurar Valores Predeterminados
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Agregar Método de Pago -->
    <div class="modal fade" id="addPaymentMethodModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Agregar Método de Pago</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Nombre del Método</label>
                        <input type="text" class="form-control" id="newPaymentMethodName">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Descripción</label>
                        <textarea class="form-control" id="newPaymentMethodDesc" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Campos Adicionales</label>
                        <div id="additionalFields">
                            <!-- Los campos se agregarán dinámicamente -->
                        </div>
                        <button class="btn btn-sm btn-secondary mt-2" onclick="addField()">
                            <i class="fas fa-plus me-1"></i>Agregar Campo
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="savePaymentMethod()">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script>
        // Cargar configuración guardada al iniciar
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadPaymentMethods();
        });

        // Función para cargar la configuración
        function loadSettings() {
            // Aquí iría la lógica para cargar la configuración guardada
            // Por ahora usaremos valores de ejemplo
            document.getElementById('darkModeSwitch').checked = false;
            document.getElementById('primaryColor').value = '#0d6efd';
            document.getElementById('accentColor').value = '#198754';
            document.getElementById('companyName').value = 'TechSupport Pro';
            document.getElementById('bankInfo').value = 'Banco XYZ\nCuenta: 1234-5678-9012\nTitular: TechSupport Pro';
        }

        // Función para cargar los métodos de pago
        function loadPaymentMethods() {
            const methods = [
                { id: 1, name: 'Efectivo', active: true },
                { id: 2, name: 'Transferencia Bancaria', active: true },
                { id: 3, name: 'Tarjeta de Crédito/Débito', active: true }
            ];

            const container = document.getElementById('paymentMethodsList');
            container.innerHTML = methods.map(method => `
                <div class="d-flex align-items-center mb-2">
                    <input type="checkbox" class="form-check-input me-2" checked>
                    <span>${method.name}</span>
                    <button class="btn btn-sm btn-link text-danger ms-auto" onclick="deletePaymentMethod(${method.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');
        }

        // Función para agregar método de pago
        function addPaymentMethod() {
            const modal = new bootstrap.Modal(document.getElementById('addPaymentMethodModal'));
            modal.show();
        }

        // Función para agregar campo adicional
        function addField() {
            const container = document.getElementById('additionalFields');
            const fieldDiv = document.createElement('div');
            fieldDiv.className = 'input-group mb-2';
            fieldDiv.innerHTML = `
                <input type="text" class="form-control" placeholder="Nombre del campo">
                <button class="btn btn-outline-danger" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            container.appendChild(fieldDiv);
        }

        // Función para guardar método de pago
        function savePaymentMethod() {
            // Aquí iría la lógica para guardar el nuevo método de pago
            const name = document.getElementById('newPaymentMethodName').value;
            alert(`Método de pago "${name}" agregado correctamente`);
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('addPaymentMethodModal'));
            modal.hide();
            
            // Recargar la lista de métodos
            loadPaymentMethods();
        }

        // Función para eliminar método de pago
        function deletePaymentMethod(id) {
            if (confirm('¿Estás seguro de eliminar este método de pago?')) {
                // Aquí iría la lógica para eliminar el método
                loadPaymentMethods(); // Recargar la lista
            }
        }

        // Función para crear respaldo
        function createBackup() {
            // Aquí iría la lógica para crear el respaldo
            alert('Respaldo creado correctamente');
        }

        // Función para guardar configuración
        function saveSettings() {
            // Aquí iría la lógica para guardar toda la configuración
            alert('Configuración guardada correctamente');
        }

        // Función para restaurar valores predeterminados
        function resetSettings() {
            if (confirm('¿Estás seguro de restaurar todos los valores predeterminados?')) {
                // Aquí iría la lógica para restaurar los valores
                loadSettings();
                alert('Valores restaurados correctamente');
            }
        }

        // Manejar cambio de modo oscuro
        document.getElementById('darkModeSwitch').addEventListener('change', function() {
            document.body.classList.toggle('dark-mode', this.checked);
            localStorage.setItem('darkMode', this.checked);
        });
    </script>
// Agregar este script en todos los archivos HTML
<script>
// Función para manejar la navegación activa
function setActiveNavItem() {
    // Obtener el nombre del archivo actual
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    
    // Remover la clase active de todos los enlaces
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });
    
    // Agregar la clase active al enlace correspondiente
    let navId = '';
    switch(currentPage) {
        case 'index.html':
            navId = 'nav-dashboard';
            break;
        case 'soporte.html':
            navId = 'nav-soporte';
            break;
        case 'cotizaciones.html':
            navId = 'nav-cotizaciones';
            break;
        case 'facturas.html':
            navId = 'nav-facturas';
            break;
        case 'inventario.html':
            navId = 'nav-inventario';
            break;
        case 'directorio.html':
            navId = 'nav-directorio';
            break;
        case 'ajustes.html':
            navId = 'nav-ajustes';
            break;
    }
    
    const activeLink = document.getElementById(navId);
    if (activeLink) {
        activeLink.classList.add('active');
    }
}

// Agregar estos estilos para el menú
document.head.insertAdjacentHTML('beforeend', `
    <style>
        .sidebar {
            background-color: #2c3e50;
            min-height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }
        
        .nav-link {
            color: rgba(255,255,255,0.7);
            padding: 0.8rem 1rem;
            margin-bottom: 0.2rem;
            border-radius: 0.3rem;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: white;
            background-color: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        
        .nav-link.active {
            color: white;
            background-color: rgba(255,255,255,0.2);
        }
        
        .nav-link i {
            width: 20px;
            margin-right: 10px;
            text-align: center;
        }
        
        /* Ajuste para el contenido principal */
        .main-content {
            margin-left: 16.666667%; /* col-md-2 */
        }
    </style>
`);

// Ejecutar cuando el DOM esté cargado
document.addEventListener('DOMContentLoaded', setActiveNavItem);

// Manejar el estado del tema oscuro
function loadThemePreference() {
    const darkMode = localStorage.getItem('darkMode') === 'true';
    document.body.classList.toggle('dark-mode', darkMode);
}

// Cargar preferencia de tema al inicio
loadThemePreference();
</script>
    <style>
    /* Estilos para el modo oscuro */
    .dark-mode {
        background-color: #1a1a1a;
        color: #ffffff;
    }

    .dark-mode .card {
        background-color: #2d2d2d;
        border-color: #404040;
    }

    .dark-mode .card-header {
        background-color: #404040;
        border-bottom-color: #505050;
    }

    .dark-mode .form-control,
    .dark-mode .form-select {
        background-color: #333333;
        border-color: #404040;
        color: #ffffff;
    }

    .dark-mode .form-control:focus,
    .dark-mode .form-select:focus {
        background-color: #404040;
        border-color: #505050;
        color: #ffffff;
    }

    .dark-mode .btn-secondary {
        background-color: #505050;
        border-color: #606060;
    }

    .dark-mode .modal-content {
        background-color: #2d2d2d;
        border-color: #404040;
    }

    .dark-mode .modal-header {
        border-bottom-color: #404040;
    }

    .dark-mode .modal-footer {
        border-top-color: #404040;
    }

    /* Animaciones */
    .fade-in {
        animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Estilos adicionales */
    .form-control-color {
        width: 100px;
    }

    .card-support {
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    .card-support:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .btn-custom {
        transition: all 0.3s ease;
    }

    .btn-custom:hover {
        transform: translateY(-1px);
    }
    </style>
</body>
</html>
